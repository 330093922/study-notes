- [1 UML](#1-UML)
  - [1.1 UML概念](#11-UML概念L)
  - [1.2 UML 2.2 分类](12-UML-22-分类)
  - [1.3 UML语法](#1.3 UML语法)
- [2 设计模式概念](#2-设计模式概念)
  - [2.1 设计原则](#21-设计原则)
- [3 二十三种设计模式](#3-二十三种设计模式)
  - [创建型模式](#创建型模式)
    - [工厂方法模式](#工厂方法模式)
    - [抽象工厂模式](#抽象工厂模式)
    - [单例模式]
    - [原型模式]
    - [建造者模式]
  - [结构型模式](#结构型模式)
    - [适配器模式]
    - [桥接模式]
    - [装饰者模式]
    - [组合模式]
    - [代理模式]
    - [享元模式]
    - [外观模式]
  - [行为型模式](#行为型模式)
    - [策略模式]
    - [观察者模式]
    - [责任链模式]
    - [备忘录模式]
    - [模板方法模式]
    - [迭代器模式]
    - [中介者模式]
    - [命令模式]
    - [访问者模式]
    - [解释器模式]
    - [状态模式]

# 设计模式学习笔记

## 1 UML

### 1.1 UML概念

**1.定义：**

​		统一建模语言（英语：Unified Modeling Language，缩写 *UML*）是非专利的第三代建模和规约语言。

**2.特点：**

- UML是一种开放的方法。
- 用于说明、可视化、构建和编写一个正在开发的、面向对象的、软件密集系统的制品的开放方法。
- UML展现了一系列最佳工程实践，这些最佳实践在对大规模，复杂系统进行建模方面，特别是在软件架构层次已经被验证有效。

### 1.2 UML 2.2 分类

UML 2.2 中一共定义了14种图示，分类如下：

- 结构式图形：强调的是系统式的建模
  - 静态图（类图，对象图，包图）
  - 实现图（组件图，部署图）
  - 剖面图
  - 复合结构图
- 行为式图形：强调系统模型种触发的事件
  - 活动图
  - 状态图
  - 用例图
- 交互式图形：属于行为式图形子集合，强调系统模型中资料流程
  - 通信图
  - 交互概述图（UML 2.2）
  - 时序图（UML 2.2）
  - 时间图（UML 2.2）

### 1.3 UML语法

​		UML箭头方向：从子类指向父类。

​		实线表示继承

​		虚线表示实现

​		实线表示关联（如企鹅和气候的关系）

​		虚线表示依赖（如动物依赖水、氧气的关系）

​		空心菱形表示聚合（如大雁群和大雁的关系）

​		实心菱形表示组合（如鸟和翅膀的关系）

​		常见数字表达及含义，假设有A类和B类，数字标记在A类侧：

- 0..1表示0或1个实例
- 0..*表示0或多个实例
- 1..1表示1个实例
- 1表示只有一个实例
- 1..*表示至少有一个实例

​		时序图种包括的建模元素主要有：对象（Actor）、生命线（Lifeline）、控制焦点（Focus of control）、消息（Message）等。

​		**类图：**

- 斜体类名表示抽象类或方法
- `<<>>`表示接口
- `+`表示public
- `-`表示private
- `#`表示protected
- `~`表示default
- `_____`表示static属性或方法

## 2 设计模式概念

### 2.1 设计原则

设计模式**7大设计原则**：

**开闭原则**

- 定义：一个软件实体如类、模块和函数应该对扩展开放，对修改关闭。
- 概括：用抽象构建框架，用实现扩展细节。
- 优点：提高软件系统的可复用性及可维护性。

**依赖倒置原则**

- 定义：高层模块不应该依赖底层模块，二者都应该依赖其抽象。
- 概括：①抽象不应该依赖细节，细节应该依赖抽象；②针对接口编程，不针对实现编程。
- 优点：可减少类间的耦合性、提高系统稳定性，提高代码可读性和维护性，可降低修改程序造成的风险。

**单一职责原则**

- 定义：不要存在多于一个导致类变更的原因。
- 概括：一个类/接口/方法只负责一项职责。
- 优点：降低类的复杂度、提高类的可读性，提高系统的可维护性、降低变更引起的风险。

**接口隔离原则**

- 定义：用多个专门的接口，而不使用单一的总接口，客户端不应该依赖它不需要的接口。
- 概括：①一个类对一个类的依赖应该建立在最小的接口上；②建立单一接口，不要建立庞大臃肿的接口；③尽量细化接口，接口中的方法尽量少。
- 优点：符合高内聚低耦合的设计思想，使得类具有很好的可读性、可扩展性和可维护性。

**迪米特原则**

- 定义：一个对象应该对其他对象保持最少的了解。（又叫最少知道原则）
- 概括：尽量降低类与类之间的耦合。（如boss、leader和staff之间，boss只需要联系leader，不和staff有直接联系，而让leader来联系staff）
- 优点：降低类之间的耦合

**里氏替换原则**

- 定义：基类可以出现的地方，子类一定可以出现。

**合成复用原则**

- 定义：要求在对象的复用时，要尽量先使用组合或者聚合等关联关系来实现，其次才考虑使用继承关系来实现。**（如果要使用继承关系，则必须严格遵循里氏替换原则。）**

## 3 二十三种设计模式

### 创建型模式

#### 工厂方法模式

- 定义：定义一个创建对象的接口，但让实现整个接口的类来决定实例化哪个类，工厂方法让类的实例化推迟到子类种进行。
- 适用场景：
  - 创建对象需要大量重复的代码；
  - 客户端（应用层）不依赖于产品类实例如何被创建、实现等细节；
  - 一个类通过其子类来制定创建哪个对象。
- 优点：①用户只需关心所需产品对应的工厂，无需关心创建细节；②加入新产品符合开闭原则，提高可扩展性。
- 缺点：①类的个数容易过多，增加复杂度；②增加了系统的抽象性和理解难度。
- 实例：List中的Iterator<T>接口。

#### 抽象工厂模式

- 定义：抽象工厂模式提供一个创建一系列相关或相互依赖对象的接口，无需指定它们具体的类。
- 适用场景：
  - 客户端（应用层）不依赖于产品类实例如何被创建、实现等细节；
  - 强调一系列相关的产品对象（属于同一产品族）一起使用创建对象需要大量重复的代码；
  - 提供一个产品类的库，所有的产品以同样的接口出现，从而使客户端不依赖于具体实现。
- 优点：①具体产品在应用层代码隔离，无需关心创建细节；②将一个系列的产品族统一到一起创建。
- 缺点：①规定了所有可能被创建的产品集合，产品族中扩展新的产品困难，需要修改抽象工厂的接口；②增加了系统的抽象性和理解难度。

#### 单例模式

#### 原型模式

#### 建造者模式

### 结构型模式

#### 适配器模式

#### 桥接模式

#### 装饰者模式

#### 组合模式

#### 代理模式

#### 享元模式

#### 外观模式

### 行为型模式

#### 策略模式

#### 观察者模式

#### 责任链模式

#### 备忘录模式

#### 模板方法模式

#### 迭代器模式

#### 中介者模式

#### 命令模式

#### 访问者模式

#### 解释器模式

#### 状态模式



